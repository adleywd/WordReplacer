@inject IJSRuntime JsRuntime
@inject IStringLocalizer<ApplicationUpdateResource> Localizer
@inject NavigationManager Navigation

<MatSnackbar Id="snackbar_app_update" Leading="true">
    <MatSnackbarContent>@Localizer["messageUpdateReady"]</MatSnackbarContent>
    <MatSnackbarActions>
        <MatButton Raised="true" OnClick="ReloadPage">@Localizer["btnReload"]</MatButton>
    </MatSnackbarActions>
</MatSnackbar>

@code {
    protected override async Task OnInitializedAsync()
    {
        await RegisterForUpdateAvailableNotification();
    }

    private async Task RegisterForUpdateAvailableNotification()
    {
        // Initialize the service-worker
        await JsRuntime.InvokeVoidAsync("registerForUpdateAvailableNotification");
    }

    private void ReloadPage()
    {
        Navigation.NavigateTo(Navigation.Uri, forceLoad: true);
    }

}
